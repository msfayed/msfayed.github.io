<mxfile host="65bd71144e">
    <diagram id="n0OYLwPZysRwcZ2UQl2-" name="Page-1">
        <mxGraphModel dx="1882" dy="636" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="2" value="Account:&amp;nbsp; 111111111111" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_account;strokeColor=#CD2264;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#CD2264;dashed=0;movable=1;resizable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="1" vertex="1">
                    <mxGeometry x="-242" y="175" width="751" height="578" as="geometry"/>
                </mxCell>
                <mxCell id="3" value="&lt;pre&gt;&lt;font face=&quot;Lucida Console&quot;&gt;{&lt;br&gt;    &quot;Version&quot;: &quot;2012-10-17&quot;,&lt;br&gt;    &quot;Statement&quot;: [&lt;br&gt;        {&lt;br&gt;            &quot;Effect&quot;: &quot;Allow&quot;,&lt;br&gt;            &quot;Action&quot;: [&lt;br&gt;                &quot;s3:*&quot;&lt;br&gt;            ],&lt;br&gt;            &quot;Resource&quot;: [&lt;br&gt;                &quot;arn:aws:s3:::&lt;b&gt;BUCKET_NAME&lt;/b&gt;&quot;,&lt;br&gt;                &quot;arn:aws:s3:::&lt;b&gt;BUCKET_NAME/*&lt;/b&gt;&quot;&lt;br&gt;            ]&lt;br&gt;        },&lt;br&gt;        {&lt;br&gt;            &quot;Effect&quot;: &quot;Allow&quot;,&lt;br&gt;            &quot;Action&quot;: [&lt;br&gt;                &quot;kms:Encrypt&quot;,&lt;br&gt;                &quot;kms:Decrypt&quot;,&lt;br&gt;                &quot;kms:DescribeKey&quot;,&lt;br&gt;                &quot;kms:GenerateDataKey*&quot;&lt;br&gt;            ],&lt;br&gt;            &quot;Resource&quot;: [&lt;br&gt;              &quot;arn:aws:kms::&lt;b&gt;222222222222&lt;/b&gt;:key/&lt;b&gt;KEY_ID&lt;/b&gt;&quot;&lt;br&gt;            ]&lt;br&gt;        }&lt;br&gt;    ]&lt;br&gt;}&lt;/font&gt;&lt;br&gt;&lt;/pre&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=1;points=[];autosize=1;strokeColor=#99CCFF;fillColor=none;dashed=1;movable=1;rotatable=1;deletable=1;editable=1;locked=0;connectable=1;" parent="2" vertex="1">
                    <mxGeometry x="17" y="109" width="387" height="425" as="geometry"/>
                </mxCell>
                <mxCell id="4" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;dashed=0;verticalLabelPosition=middle;verticalAlign=middle;align=right;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.lambda;labelPosition=left;" parent="2" vertex="1">
                    <mxGeometry x="616" y="55" width="78" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="2" source="6" target="8" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="6" value="Execution role - Inline Policy" style="outlineConnect=0;dashed=0;verticalLabelPosition=top;verticalAlign=bottom;align=center;html=1;shape=mxgraph.aws3.policy;fillColor=#5294CF;gradientColor=none;horizontal=1;labelPosition=center;" parent="2" vertex="1">
                    <mxGeometry x="378" y="34" width="55.5" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="2" source="8" target="4" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="8" value="Role:&amp;nbsp;&lt;b style=&quot;background-color: initial; border-color: var(--border-color);&quot;&gt;lambda-execution-role&lt;/b&gt;" style="outlineConnect=0;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;shape=mxgraph.aws3.role;fillColor=#759C3E;gradientColor=none;labelPosition=center;" parent="2" vertex="1">
                    <mxGeometry x="520" y="215" width="94.5" height="79.5" as="geometry"/>
                </mxCell>
                <mxCell id="9" value="&lt;b&gt;Optional&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;strokeColor=#0000FF;labelPosition=right;verticalLabelPosition=top;align=left;verticalAlign=bottom;fillColor=none;" parent="2" vertex="1">
                    <mxGeometry x="72" y="315" width="329" height="175" as="geometry"/>
                </mxCell>
                <mxCell id="10" value="Account:&amp;nbsp; 222222222222" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_account;strokeColor=#CD2264;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#CD2264;dashed=0;" parent="1" vertex="1">
                    <mxGeometry x="557" y="174" width="1379" height="574" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="S3 Bucket:&amp;nbsp;&lt;b style=&quot;border-color: var(--border-color); background-color: initial; color: rgb(0, 0, 0);&quot;&gt;BUCKET_NAME&lt;/b&gt;" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#3F8624;strokeColor=none;dashed=0;verticalLabelPosition=top;verticalAlign=bottom;align=left;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.bucket_with_objects;labelPosition=right;" parent="10" vertex="1">
                    <mxGeometry x="40" y="55" width="75" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="10" source="13" target="11" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="13" value="Bucket Policy" style="outlineConnect=0;dashed=0;verticalLabelPosition=top;verticalAlign=bottom;align=center;html=1;shape=mxgraph.aws3.policy;fillColor=#5294CF;gradientColor=none;horizontal=1;labelPosition=center;" parent="10" vertex="1">
                    <mxGeometry x="571" y="165" width="55.5" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="14" value="&lt;pre&gt;&lt;font face=&quot;Lucida Console&quot;&gt;&lt;span style=&quot;background-color: initial; white-space-collapse: collapse;&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre&gt;&lt;font face=&quot;Lucida Console&quot;&gt;&amp;nbsp; &amp;nbsp; &quot;Version&quot;: &quot;2012-10-17&quot;,&lt;br&gt;&lt;/font&gt;&lt;pre&gt;&lt;font face=&quot;Lucida Console&quot;&gt;&amp;nbsp; &amp;nbsp; &quot;Statement&quot;: [&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; {&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &quot;Effect&quot;: &quot;Allow&quot;,&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &quot;Principal&quot;: {&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &quot;AWS&quot;: &quot;arn:aws:iam::&lt;b&gt;111111111111&lt;/b&gt;:role/&lt;b style=&quot;border-color: var(--border-color); text-align: right; background-color: initial;&quot;&gt;lambda-execution-role&lt;/b&gt;&quot;&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; },&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &quot;Action&quot;: &quot;s3:*&quot;,&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &quot;Resource&quot;: [&lt;br&gt;                &quot;arn:aws:s3:::&lt;b style=&quot;background-color: initial; border-color: var(--border-color);&quot;&gt;BUCKET_NAME&lt;/b&gt;&quot;,&lt;br&gt;                &quot;arn:aws:s3:::&lt;b style=&quot;background-color: initial; border-color: var(--border-color);&quot;&gt;BUCKET_NAME&lt;/b&gt;/*&quot;&lt;br&gt;            ]&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; }&lt;br&gt;&amp;nbsp; &amp;nbsp; ]&lt;br&gt;}&lt;/font&gt;&lt;/pre&gt;&lt;/pre&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#99CCFF;fillColor=none;dashed=1;" parent="10" vertex="1">
                    <mxGeometry x="15" y="233" width="583" height="290" as="geometry"/>
                </mxCell>
                <mxCell id="15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="10" source="16" target="11" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="16" value="KMS Key" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#BF0816;strokeColor=none;dashed=0;verticalLabelPosition=middle;verticalAlign=middle;align=left;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.data_encryption_key;labelPosition=right;" parent="10" vertex="1">
                    <mxGeometry x="674" y="54" width="62" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="10" source="18" target="16" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="18" value="Key Policy" style="outlineConnect=0;dashed=0;verticalLabelPosition=top;verticalAlign=bottom;align=center;html=1;shape=mxgraph.aws3.policy;fillColor=#5294CF;gradientColor=none;horizontal=1;labelPosition=center;" parent="10" vertex="1">
                    <mxGeometry x="1308" y="160" width="55.5" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="19" value="&lt;pre&gt;&lt;font face=&quot;Lucida Console&quot;&gt;{&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&quot;Version&quot;: &quot;2012-10-17&quot;,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&quot;Statement&quot;: [      &lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;{&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&quot;Effect&quot;: &quot;Allow&quot;,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&quot;Action&quot;: [&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&quot;kms:Encrypt&quot;,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&quot;kms:Decrypt&quot;,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&quot;kms:DescribeKey&quot;,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&quot;kms:GenerateDataKey*&quot;,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&quot;kms:ReEncrypt*&quot;&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;],&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&quot;Resource&quot;: &quot;*&quot;,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&quot;Principal&quot;: { &quot;AWS&quot;: &quot;arn:aws:iam::&lt;b&gt;111111111111&lt;/b&gt;:role/&lt;b&gt;lambda-execution-role&lt;/b&gt;&quot; }&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;}&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;]&lt;br&gt;}&lt;/font&gt;&lt;br&gt;&lt;/pre&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#99CCFF;fillColor=none;dashed=1;" parent="10" vertex="1">
                    <mxGeometry x="658" y="229" width="677" height="281" as="geometry"/>
                </mxCell>
                <mxCell id="20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="4" target="11" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="21" value="AWS Cross Account S3 Access through Lambda" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Verdana;fontSize=18;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="238" y="44" width="531" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="22" value="Account:&amp;nbsp; 222222222222" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_account;strokeColor=#CD2264;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#CD2264;dashed=0;" parent="1" vertex="1">
                    <mxGeometry x="570" y="899" width="1126" height="508" as="geometry"/>
                </mxCell>
                <mxCell id="23" value="S3 Bucket:&amp;nbsp;&lt;b style=&quot;color: rgb(0, 0, 0); text-align: left; background-color: initial; border-color: var(--border-color);&quot;&gt;BUCKET_NAME&lt;/b&gt;" style="sketch=0;outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#3F8624;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.bucket_with_objects;" parent="22" vertex="1">
                    <mxGeometry x="64" y="56" width="75" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="22" source="25" target="28" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="25" value="Permissions policies" style="outlineConnect=0;dashed=0;verticalLabelPosition=top;verticalAlign=bottom;align=center;html=1;shape=mxgraph.aws3.policy;fillColor=#5294CF;gradientColor=none;horizontal=1;labelPosition=center;" parent="22" vertex="1">
                    <mxGeometry x="416" y="151" width="55.5" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="26" value="&lt;pre&gt;&lt;font face=&quot;Lucida Console&quot;&gt;{&lt;br&gt;&lt;/font&gt;&lt;pre&gt;&lt;font face=&quot;Lucida Console&quot;&gt;    &quot;Version&quot;: &quot;2012-10-17&quot;,&lt;br&gt;&lt;/font&gt;&lt;pre&gt;&lt;font face=&quot;Lucida Console&quot;&gt;    &quot;Statement&quot;: [&lt;br&gt;&lt;/font&gt;&lt;font face=&quot;Lucida Console&quot;&gt;        {&lt;br&gt;&lt;/font&gt;&lt;font face=&quot;Lucida Console&quot;&gt;            &quot;Effect&quot;: &quot;Allow&quot;,&lt;br&gt;&lt;/font&gt;&lt;font face=&quot;Lucida Console&quot;&gt;            &quot;Principal&quot;: {&lt;br&gt;&lt;/font&gt;&lt;font face=&quot;Lucida Console&quot;&gt;                &quot;AWS&quot;: &quot;arn:aws:iam::&lt;b&gt;111111111111&lt;/b&gt;:role/&lt;b&gt;lambda-execution-role&lt;/b&gt;&quot;&lt;br&gt;&lt;/font&gt;&lt;font face=&quot;Lucida Console&quot;&gt;            },&lt;br&gt;&lt;/font&gt;&lt;font face=&quot;Lucida Console&quot;&gt;            &quot;Action&quot;: &quot;sts:AssumeRole&quot;,&lt;br&gt;&lt;/font&gt;&lt;font face=&quot;Lucida Console&quot;&gt;            &quot;Condition&quot;: {}&lt;br&gt;&lt;/font&gt;&lt;font face=&quot;Lucida Console&quot;&gt;        }&lt;br&gt;&lt;/font&gt;&lt;font face=&quot;Lucida Console&quot;&gt;    ]&lt;br&gt;&lt;/font&gt;&lt;font face=&quot;Lucida Console&quot;&gt;}&lt;/font&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/pre&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#99CCFF;fillColor=none;dashed=1;" parent="22" vertex="1">
                    <mxGeometry x="482" y="222" width="583" height="247" as="geometry"/>
                </mxCell>
                <mxCell id="27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="22" source="28" target="23" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="28" value="Role: &lt;b&gt;S3ROLE&lt;/b&gt;" style="outlineConnect=0;dashed=0;verticalLabelPosition=top;verticalAlign=bottom;align=left;html=1;shape=mxgraph.aws3.role;fillColor=#759C3E;gradientColor=none;labelPosition=right;" parent="22" vertex="1">
                    <mxGeometry x="216" y="55" width="94.5" height="79.5" as="geometry"/>
                </mxCell>
                <mxCell id="29" value="&lt;pre&gt;&lt;font face=&quot;Lucida Console&quot;&gt;{&lt;br/&gt;    &quot;Version&quot;: &quot;2012-10-17&quot;,&lt;br/&gt;    &quot;Statement&quot;: [&lt;br/&gt;        {&lt;br/&gt;            &quot;Effect&quot;: &quot;Allow&quot;,&lt;br/&gt;            &quot;Action&quot;: &quot;s3:*&quot;,&lt;br/&gt;            &quot;Resource&quot;: [&lt;br/&gt;                &quot;arn:aws:s3:::&lt;b&gt;BUCKET_NAME&lt;/b&gt;&quot;,&lt;br/&gt;                &quot;arn:aws:s3:::&lt;b&gt;BUCKET_NAME/*&lt;/b&gt;&quot;&lt;br/&gt;            ]&lt;br/&gt;        }&lt;br/&gt;    ]&lt;br/&gt;}&lt;/font&gt;&lt;br&gt;&lt;/pre&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#99CCFF;fillColor=none;dashed=1;" parent="22" vertex="1">
                    <mxGeometry x="103" y="221.5" width="339" height="223" as="geometry"/>
                </mxCell>
                <mxCell id="30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.96;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="22" source="31" target="28" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="546" y="95"/>
                            <mxPoint x="331" y="95"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="31" value="Trusted entities&lt;br&gt;" style="outlineConnect=0;dashed=0;verticalLabelPosition=top;verticalAlign=bottom;align=right;html=1;shape=mxgraph.aws3.policy;fillColor=#5294CF;gradientColor=none;horizontal=1;labelPosition=left;" parent="22" vertex="1">
                    <mxGeometry x="1039" y="151" width="55.5" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="32" value="Account:&amp;nbsp; 111111111111" style="points=[[0,0],[0.25,0],[0.5,0],[0.75,0],[1,0],[1,0.25],[1,0.5],[1,0.75],[1,1],[0.75,1],[0.5,1],[0.25,1],[0,1],[0,0.75],[0,0.5],[0,0.25]];outlineConnect=0;gradientColor=none;html=1;whiteSpace=wrap;fontSize=12;fontStyle=0;container=1;pointerEvents=0;collapsible=0;recursiveResize=0;shape=mxgraph.aws4.group;grIcon=mxgraph.aws4.group_account;strokeColor=#CD2264;fillColor=none;verticalAlign=top;align=left;spacingLeft=30;fontColor=#CD2264;dashed=0;" parent="1" vertex="1">
                    <mxGeometry x="-169" y="899" width="675" height="507" as="geometry"/>
                </mxCell>
                <mxCell id="33" value="" style="sketch=0;points=[[0,0,0],[0.25,0,0],[0.5,0,0],[0.75,0,0],[1,0,0],[0,1,0],[0.25,1,0],[0.5,1,0],[0.75,1,0],[1,1,0],[0,0.25,0],[0,0.5,0],[0,0.75,0],[1,0.25,0],[1,0.5,0],[1,0.75,0]];outlineConnect=0;fontColor=#232F3E;gradientColor=#F78E04;gradientDirection=north;fillColor=#D05C17;strokeColor=#ffffff;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;shape=mxgraph.aws4.resourceIcon;resIcon=mxgraph.aws4.lambda;" parent="32" vertex="1">
                    <mxGeometry x="504" y="33" width="78" height="78" as="geometry"/>
                </mxCell>
                <mxCell id="34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="32" source="35" target="37" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="35" value="Permissions policies" style="outlineConnect=0;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=left;html=1;shape=mxgraph.aws3.policy;fillColor=#5294CF;gradientColor=none;horizontal=1;labelPosition=right;" parent="32" vertex="1">
                    <mxGeometry x="436" y="141" width="55.5" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="32" source="37" target="33" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="37" value="Role:&amp;nbsp;&lt;b style=&quot;background-color: initial; border-color: var(--border-color);&quot;&gt;lambda-execution-role&lt;/b&gt;" style="outlineConnect=0;dashed=0;verticalLabelPosition=middle;verticalAlign=middle;align=right;html=1;shape=mxgraph.aws3.role;fillColor=#759C3E;gradientColor=none;labelPosition=left;" parent="32" vertex="1">
                    <mxGeometry x="267" y="33" width="94.5" height="79.5" as="geometry"/>
                </mxCell>
                <mxCell id="38" value="&lt;pre&gt;&lt;span style=&quot;background-color: initial; font-family: Helvetica;&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;pre&gt;    &quot;Version&quot;: &quot;2012-10-17&quot;,&lt;br&gt;    &quot;Statement&quot;: [&lt;br&gt;        {&lt;br&gt;            &quot;Effect&quot;: &quot;Allow&quot;,&lt;br&gt;            &quot;Action&quot;: [&lt;br&gt;                &quot;sts:AssumeRole&quot;&lt;br&gt;            ],&lt;br&gt;            &quot;Resource&quot;: [&lt;br&gt;                &quot;arn:aws:iam::&lt;b&gt;222222222222&lt;/b&gt;:role/&lt;b style=&quot;border-color: var(--border-color); font-family: Helvetica;&quot;&gt;S3ROLE&lt;/b&gt;&quot;&lt;br&gt;            ]&lt;br&gt;        }&lt;br&gt;    ]&lt;br&gt;}&lt;br&gt;&lt;/pre&gt;" style="text;html=1;align=left;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=#99CCFF;fillColor=none;dashed=1;" parent="32" vertex="1">
                    <mxGeometry x="38" y="220" width="419" height="251" as="geometry"/>
                </mxCell>
                <mxCell id="39" value="using Bucket Policy" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Verdana;fontSize=18;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="245" y="132" width="531" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="40" value="using Assume Role" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Verdana;fontSize=18;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="286" y="846" width="531" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="33" target="28" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="519" y="972"/>
                            <mxPoint x="519" y="935"/>
                            <mxPoint x="833" y="935"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="42" value="&lt;a href=&quot;https://repost.aws/knowledge-center/lambda-function-assume-iam-role&quot;&gt;Configure a Lambda function to assume a role in another account | AWS re:Post (repost.aws)&lt;/a&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
                    <mxGeometry x="1151" y="1522" width="520" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="43" value="&lt;a href=&quot;https://medium.com/@2017tejasgupta/cross-account-s3-access-using-lambda-functions-14d403d5f687&quot;&gt;Cross-account S3 access using Lambda Functions | by Tejas Gupta | Medium&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;a href=&quot;https://tomgregory.com/s3-bucket-access-from-the-same-and-another-aws-account/&quot; style=&quot;border-color: var(--border-color);&quot;&gt;S3 bucket access from the same and another AWS account â€“ Tom Gregory&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;a href=&quot;https://dzone.com/articles/aws-cross-account-s3-access-through-lambda-functio&quot; style=&quot;border-color: var(--border-color);&quot;&gt;AWS Cross Account S3 Access Through Lambda Functions - DZone&lt;/a&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
                    <mxGeometry x="1268" y="41" width="440" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="44" value="&lt;b&gt;Optional&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;strokeColor=#0000FF;labelPosition=center;verticalLabelPosition=top;align=center;verticalAlign=bottom;fillColor=none;" parent="1" vertex="1">
                    <mxGeometry x="1207" y="207" width="722" height="503" as="geometry"/>
                </mxCell>
                <mxCell id="45" value="&lt;h1&gt;&lt;span style=&quot;font-family: &amp;quot;Lucida Console&amp;quot;; font-size: 13px; background-color: initial; font-weight: normal;&quot;&gt;import { S3Client, GetObjectCommand, ListObjectsCommand  } from &quot;@aws-sdk/client-s3&quot;;&lt;/span&gt;&lt;br&gt;&lt;/h1&gt;&lt;div&gt;&lt;pre style=&quot;border-color: var(--border-color); font-size: 13px;&quot;&gt;&lt;pre style=&quot;border-color: var(--border-color);&quot;&gt;&lt;font style=&quot;border-color: var(--border-color);&quot; face=&quot;Lucida Console&quot;&gt;import { STSClient, AssumeRoleCommand } from &quot;@aws-sdk/client-sts&quot;;&lt;/font&gt;&lt;/pre&gt;&lt;font style=&quot;border-color: var(--border-color);&quot; face=&quot;Lucida Console&quot;&gt;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;export const handler = async (event, context) =&amp;gt; {&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  const roleArn = &quot;arn:aws:iam::222222222222:role/S3ROLE&quot;;&lt;br&gt;  const roleSessionName = &quot;SessionName&quot;;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  const s3BucketName = &quot;BUCKET_NAME&quot;;&lt;br&gt;  const s3FileName = &quot;123.txt&quot;;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  // Assume the role in the different account&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  const stsClient = new STSClient({ region: &quot;us-west-2&quot; });&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  const assumeRoleCommand = new AssumeRoleCommand({&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;    RoleArn: roleArn,&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;    RoleSessionName: roleSessionName,&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  });&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  const { Credentials } = await stsClient.send(assumeRoleCommand);&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  &lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  console.log(Credentials);&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  &lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  &lt;br style=&quot;border-color: var(--border-color);&quot;&gt;   const s3Client = new S3Client({&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;        region: &quot;us-west-2&quot;,&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;        credentials: {&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;            accessKeyId: Credentials.AccessKeyId,&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;            secretAccessKey: Credentials.SecretAccessKey,&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;            sessionToken: Credentials.SessionToken&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;        }&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;    });&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;    &lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&lt;font style=&quot;border-color: var(--border-color);&quot; color=&quot;#006600&quot;&gt;   // ############################&lt;/font&gt;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;   &lt;br style=&quot;border-color: var(--border-color);&quot;&gt;    const listObjectsParams = {&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;        Bucket:s3BucketName&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;    };&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;    &lt;br style=&quot;border-color: var(--border-color);&quot;&gt;    const listObjectsCommand = new ListObjectsCommand(listObjectsParams);&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;    const listObjectsOutput = await s3Client.send(listObjectsCommand);&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;    console.log(listObjectsOutput.Contents);&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&lt;font style=&quot;border-color: var(--border-color);&quot; color=&quot;#006600&quot;&gt;   // ############################&lt;/font&gt;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  &lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  try {&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;    &lt;br style=&quot;border-color: var(--border-color);&quot;&gt;    const getObjectCommand = new GetObjectCommand({&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;      Bucket: s3BucketName,&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;      Key: s3FileName,&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;    });&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;    const response = await s3Client.send(getObjectCommand);&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  &lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&lt;font style=&quot;border-color: var(--border-color);&quot; color=&quot;#006600&quot;&gt;    // Process the file contents&lt;/font&gt;&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;border-color: var(--border-color); font-size: 13px;&quot;&gt;&lt;font style=&quot;border-color: var(--border-color);&quot; color=&quot;#006600&quot; face=&quot;Lucida Console&quot;&gt;    // The Body object also has 'transformToByteArray' and 'transformToWebStream' methods.&lt;/font&gt;&lt;/pre&gt;&lt;pre style=&quot;border-color: var(--border-color); font-size: 13px;&quot;&gt;&lt;font style=&quot;border-color: var(--border-color);&quot;&gt;&lt;font style=&quot;border-color: var(--border-color);&quot; face=&quot;Lucida Console&quot;&gt;&lt;font style=&quot;border-color: var(--border-color);&quot; color=&quot;#006600&quot;&gt;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&lt;/font&gt;    const fileContents = await response.Body.transformToString();&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;    console.log(fileContents);&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  &lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  } catch (err) {&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;    console.error(err);&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  }&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  &lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&lt;font style=&quot;border-color: var(--border-color);&quot; color=&quot;#006600&quot;&gt;     // ############################&lt;/font&gt;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;  &lt;br style=&quot;border-color: var(--border-color);&quot;&gt;};&lt;/font&gt;&lt;font style=&quot;border-color: var(--border-color);&quot; face=&quot;Courier New&quot;&gt;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&lt;/font&gt;&lt;/font&gt;&lt;/pre&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 13px;&quot;&gt;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&lt;/div&gt;&lt;/div&gt;" style="text;html=1;strokeColor=#FF8000;fillColor=none;spacing=10;spacingTop=0;whiteSpace=wrap;overflow=hidden;rounded=0;dashed=1;shadow=0;glass=0;" parent="1" vertex="1">
                    <mxGeometry x="-1010" y="919" width="761" height="1112" as="geometry"/>
                </mxCell>
                <mxCell id="46" value="&lt;h1&gt;&lt;pre style=&quot;border-color: var(--border-color); font-size: 12px;&quot;&gt;&lt;font style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: normal;&quot; face=&quot;Lucida Console&quot;&gt;import { S3Client, GetObjectCommand, ListObjectsCommand&amp;nbsp; } from &quot;@aws-sdk/client-s3&quot;;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&lt;/font&gt;&lt;pre style=&quot;border-color: var(--border-color);&quot;&gt;&lt;font style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: normal;&quot; face=&quot;Lucida Console&quot;&gt;export const handler = async (event, context) =&amp;gt; {&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; const s3BucketName = &quot;BUCKET_NAME&quot;;&lt;br&gt;&amp;nbsp; const s3FileName = &quot;123.txt&quot;;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; const s3Client = new S3Client({&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; region: &quot;us-west-2&quot;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; });&amp;nbsp;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp;&lt;font style=&quot;border-color: var(--border-color); font-size: 12px;&quot; color=&quot;#006600&quot;&gt;// ############################&lt;/font&gt;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; const listObjectsParams = {&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; Bucket:s3BucketName&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; };&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; const listObjectsCommand = new ListObjectsCommand(listObjectsParams);&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; console.log(&quot;calling ListObjectsCommand&quot;);&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; const listObjectsOutput = await s3Client.send(listObjectsCommand);&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; console.log(listObjectsOutput.Contents);&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp;&lt;font style=&quot;border-color: var(--border-color); font-size: 12px;&quot; color=&quot;#006600&quot;&gt;// ############################&lt;/font&gt;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; const getObjectCommand = new GetObjectCommand({&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; Bucket: s3BucketName,&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; Key: s3FileName,&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; });&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; console.log(&quot;calling GetObjectCommand&quot;);&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; const response = await s3Client.send(getObjectCommand);&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; // Process the file contents&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; const fileContents = await response.Body.transformToString();&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; console.log(fileContents);&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;font style=&quot;border-color: var(--border-color); font-size: 12px;&quot; color=&quot;#006600&quot;&gt;// ############################&lt;/font&gt;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;};&lt;/font&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px;&quot;&gt;&lt;br style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: 400;&quot;&gt;&lt;/div&gt;&lt;/h1&gt;" style="text;html=1;strokeColor=#FF8000;fillColor=none;spacing=10;spacingTop=0;whiteSpace=wrap;overflow=hidden;rounded=0;dashed=1;shadow=0;glass=0;" parent="1" vertex="1">
                    <mxGeometry x="-949" y="175" width="663" height="564" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>